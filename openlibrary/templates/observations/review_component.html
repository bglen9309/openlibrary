$def with(work, reader_observations, key)

$if reader_observations['total_respondents']:
  $ total_reviews = reader_observations['total_respondents']
$else:
  $ total_reviews = 0

<a id="reader-observations" name="reader-observations" class="section-anchor"></a>

<div class="tab-section review-component">
  <div class="reviews-header">
    <h2 class="observation-title">$_('Community Reviews')</h2>
    <a class="observations-feedback" href="https://forms.gle/wEr1dw3tLQYrC7Rr6">Feedback?</a>
  </div>
  $if total_reviews > 0:
    $:render_template('observations/charts', reader_observations)
  $else:
    <div class="no-stats-message">$_('No community reviews have been submitted for this work.')</div>
  <div class="review-cta">
    <p style="font-size: 16px; padding-bottom: 5px;">$ungettext('$(count)d patron has tagged this work.', '%(count)d patrons have tagged this work.', total_reviews, count=total_reviews)</p>
    $if ctx.user:
      $ link_text = _('+ Tag this work')
      $ link_markup = '<a href="javascript:;" class="observations-modal-link">%s</a>' % link_text
      $:macros.ObservationsModal(work, link_markup, 'stats', 'stats-link')
    $else:
      <a class="login-link" href="/account/login?redirect=$(key)#reader-observations">$_('+ Log in to tag this work')</a>
  </div>
</div>
